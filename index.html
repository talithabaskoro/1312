<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Our Wedding Invitation</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="hero" id="top">
    <div class="hero-inner">
      <div class="hero-text">
  <p class="greeting" id="greeting">Halo, dear guest</p>
  <p class="eyebrow">Kami akan menikah</p>
  <h1 class="names">Talitha &amp; Baskoro</h1>
  <p class="date">Sabtu, 13 Desember 2025 &middot; Bojonegoro</p>
  <a class="btn-primary" href="#details">View Details</a>
</div>
      <div class="hero-photo">
        <!-- Replace src with your photo URL -->
        <img src="pix.png" alt="Lonely Rolling No More oleh Lintang Wiranandha" />
      </div>
    </div>
  </header>

  <main>
    <section id="details" class="section section-details">
      <h2>Acara Pernikahan</h2>
      <p class="intro">
        Sungguh bahagia melihatmu turut serta menyaksikan pernikahan kami.
      </p>
      <div class="details-grid">
        <div>
          <h3>Akad</h3>
          <p>10.00 &ndash; 11.00</p>
          <p>Rumah Mempelai Perempuan</p>
          <p>Jl. Basuki Rahmad Gg. Aspol Lorong H No. 4, Bojonegoro</p>
        </div>
        <div>
          <h3>Makan & Ramah Tamah</h3>
          <p>12.00 &ndash; 13.00</p>
          <p>Omah Tepi Sawah</p>
          <p>Jl. Sukowati, RT 3 RW 1, Sugihwaras, Bojonegoro</p>
        </div>
      </div>

      <a class="btn-outline" target="_blank"
         href="https://maps.google.com">
        Open in Google Maps
      </a>
    </section>

    <section id="story" class="section section-story">
      <h2>Cerita Kami</h2>
      <p>
        Dari usap kanan, cerita kami bermula. Kencan pertama di Carl's Jr. Graha Famili yang sudah tutup.
        Memutuskan berpacaran saat sedang LDR Taiwan&ndash;Surabaya. Selepas Talitha pulang dari Taiwan,
        LDR lagi Bojonegoro&ndash;Surabaya. Sejenak berhenti pertengahan 2023 yang berulang dimulai di
        awal 2024. Hubungan kami menerima lingkar-lingkar yang memperkaya hubungan kami. Manusia-manusia
        baik yang dengan kehadiran mereka kami merayakan hubungan kami dengan jauh lebih baik.
      </p>
      <p>
        Salah satu dari mereka itu adalah kamu. Kamu sudah menjadi bagian dari cerita kami. Kami ingin
        kamu tetap menjadi bagian dari cerita kami.
      </p>
    </section>

    <section id="schedule" class="section section-schedule">
      <h2>Jadwal</h2>
      <ul class="timeline">
        <li>
          <span class="time">09.30</span>
          <span class="event">Datang tamu &amp; pembukaan</span>
        </li>
        <li>
          <span class="time">10.00</span>
          <span class="event">Akad Nikah / Ceremony</span>
        </li>
        <li>
          <span class="time">11.00</span>
          <span class="event">Resepsi &amp; ramah tamah</span>
        </li>
        <li>
          <span class="time">11.30</span>
          <span class="event">Sepatah kata dari rekan dan keluarga</span>
        </li>
      </ul>
    </section>

   <section id="rsvp" class="section section-rsvp">
  <h2>RSVP</h2>
  <p class="intro">
    Mohon konfirmasi kehadiran untuk akad, ramah tamah, atau keduanya.
  </p>

  <form id="rsvp-form" class="rsvp-form">
    <div class="field-group">
      <label for="rsvp-name">Nama</label>
      <input
        id="rsvp-name"
        name="name"
        type="text"
        placeholder="Nama kamu"
      />
    </div>

    <div class="field-group">
      <label>Keikutsertaan</label>
      <div class="rsvp-options">
        <label>
          <input type="radio" name="attendance" value="Akad saja" required />
          Akad saja
        </label>
        <label>
          <input type="radio" name="attendance" value="Ramah tamah saja" />
          Ramah tamah saja
        </label>
        <label>
          <input type="radio" name="attendance" value="Akad dan ramah tamah" />
          Keduanya (akad &amp; ramah tamah)
        </label>
      </div>
    </div>

    <button type="submit" class="btn-primary">Kirim via WhatsApp</button>
    <p id="rsvp-status" class="rsvp-status" aria-live="polite"></p>
  </form>
</section>

  </main>
<section id="guestbook" class="section section-guestbook">
  <h2>Ucapan &amp; Doa</h2>
  <p class="intro">
    Tinggalkan ucapan atau doa untuk kami. Ucapan akan tampil di bawah ini dan
    bisa dibaca oleh semua tamu.
  </p>

  <!-- Simple form (no Google UI) -->
  <form id="guestbook-form" class="guestbook-form">
    <div class="field-group">
      <label for="guest-name">Nama</label>
      <input
        id="guest-name"
        name="name"
        type="text"
        placeholder="Nama kamu"
      />
    </div>

    <div class="field-group">
      <label for="guest-message">Ucapan / Doa</label>
      <textarea
        id="guest-message"
        name="message"
        rows="3"
        placeholder="Tulis ucapan manis di sini…"
        required
      ></textarea>
    </div>

    <button type="submit" class="btn-primary">Kirim Ucapan</button>
    <p id="guestbook-status" class="guestbook-status" aria-live="polite"></p>
  </form>

  <!-- List of messages -->
  <ul id="guestbook-list" class="guestbook-list">
    <li class="guestbook-item guestbook-empty">
      Belum ada ucapan. Jadilah yang pertama!
    </li>
  </ul>
</section>


  <footer class="footer">
    <p>Dengan penuh kasih,</p>
    <p class="names-small">Talitha &amp; Baskoro</p>
    <p class="hashtag">#1312TalithaBaskoro</p>
    <a class="back-to-top" href="#top">Back to top</a>
  </footer>
  <script>
  (function () {
    const params = new URLSearchParams(window.location.search);
    const invitee = params.get("to"); // e.g. ?to=Rani%20Pratama
    const greetingEl = document.getElementById("greeting");

    if (greetingEl) {
      if (invitee && invitee.trim().length > 0) {
        greetingEl.textContent = "Hi, " + invitee.trim();
      } else {
        greetingEl.textContent = "Hi, dear guest";
      }
    }
  })();
</script>
 <script>
  const GUESTBOOK_URL = "https://script.google.com/macros/s/AKfycbyAamfIsCCpj4MQ8pjpnTivlr-_k8He4TLeGOhXrzYeZBJOKpEZrV2QOfnA5exmrfuQ/exec"; // from Apps Script

  function escapeHtml(str) {
    return (str || "").replace(/[&<>"']/g, function (m) {
      return {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      }[m];
    });
  }

  async function loadGuestbook() {
    try {
      const res = await fetch(GUESTBOOK_URL);
      const messages = await res.json();
      const list = document.getElementById("guestbook-list");
      if (!list) return;

      if (!messages || messages.length === 0) {
        list.innerHTML =
          '<li class="guestbook-item guestbook-empty">Belum ada ucapan. Jadilah yang pertama!</li>';
        return;
      }

      // show latest 30, newest on top
      const latest = messages.slice(-30).reverse();
      let html = "";

      latest.forEach((item) => {
        html += '<li class="guestbook-item">';
        html +=
          '<p class="guestbook-message">' +
          escapeHtml(item.message || "") +
          "</p>";
        html +=
          '<p class="guestbook-meta">' +
          escapeHtml(item.name || "Tamu") +
          " &middot; <span>" +
          escapeHtml(item.timestamp || "") +
          "</span></p>";
        html += "</li>";
      });

      list.innerHTML = html;
    } catch (err) {
      console.error("Error loading guestbook:", err);
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    loadGuestbook();

    const form = document.getElementById("guestbook-form");
    const statusEl = document.getElementById("guestbook-status");

    if (form) {
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        if (statusEl) statusEl.textContent = "Mengirim…";

        const formData = new FormData(form);
        const data = new URLSearchParams(formData);

        try {
          const res = await fetch(GUESTBOOK_URL, {
            method: "POST",
            body: data
          });
          const json = await res.json();

          if (json.status === "success") {
            if (statusEl)
              statusEl.textContent = "Terima kasih atas ucapannya ❤️";
            form.reset();
            loadGuestbook(); // refresh list
          } else {
            if (statusEl)
              statusEl.textContent =
                "Maaf, terjadi kesalahan. Coba lagi sebentar lagi.";
          }
        } catch (err) {
          console.error(err);
          if (statusEl)
            statusEl.textContent = "Maaf, tidak bisa terhubung ke server.";
        }
      });
    }
  });
</script>

</body>
</html>
